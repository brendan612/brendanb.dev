---
import NavLink from './NavLink.astro';
import ThemeToggle from './ThemeToggle.astro';
---

<header class="header-wrap">
	<div class="container header">
		<a href="/" class="brand">
			<span class="dot" aria-hidden="true"></span>
			<span class="brand-text">brendanb<span class="brand-tld">.dev</span></span>
		</a>

		<nav class="nav" aria-label="Primary">
			<NavLink href="/" label="Home" />
			<NavLink href="/projects" label="Projects" />
			<NavLink href="/about" label="About" />
			<NavLink href="/contact" label="Contact" />
		</nav>

		<ThemeToggle />
	</div>
</header>

<style>
	.header-wrap {
		position: sticky;
		top: 0;
		z-index: 100;
		border-bottom: 1px solid color-mix(in oklab, var(--line) 60%, transparent);
		background: color-mix(in oklab, var(--bg) 85%, transparent);
		backdrop-filter: blur(12px) saturate(1.2);
		-webkit-backdrop-filter: blur(12px) saturate(1.2);
	}

	.header {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 0.85rem 0;
		gap: var(--space-4);
	}

	/* ── Brand ── */
	.brand {
		display: inline-flex;
		align-items: center;
		gap: 0.55rem;
		font-family: var(--font-mono);
		font-size: 0.88rem;
		font-weight: 500;
		letter-spacing: -0.02em;
		color: var(--ink);
		transition: color var(--transition-fast);
	}

	.brand:hover {
		color: var(--accent-strong);
	}

	.brand-tld {
		color: var(--accent);
	}

	.dot {
		position: relative;
		width: 0.5rem;
		height: 0.5rem;
		background: var(--accent);
		border-radius: 50%;
		flex-shrink: 0;
	}

	.dot::after {
		content: '';
		position: absolute;
		inset: -4px;
		border-radius: 50%;
		background: var(--accent);
		opacity: 0.25;
		animation: pulse 2.5s ease-in-out infinite;
	}

	@keyframes pulse {
		0%, 100% { transform: scale(1); opacity: 0.25; }
		50% { transform: scale(1.6); opacity: 0; }
	}

	/* ── Navigation ── */
	.nav {
		display: flex;
		gap: 0.25rem;
		flex-wrap: wrap;
	}

	/* ── Mobile ── */
	@media (max-width: 720px) {
		.header {
			padding: 0.75rem 0 0.8rem;
			display: grid;
			grid-template-columns: 1fr auto;
			grid-template-rows: auto auto;
			gap: 0.5rem var(--space-4);
		}

		.brand {
			grid-column: 1;
			grid-row: 1;
		}

		.nav {
			grid-column: 1 / -1;
			grid-row: 2;
		}
	}
</style>
