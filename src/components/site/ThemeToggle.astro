<button class="theme-toggle" type="button" data-theme-toggle aria-label="Switch to light mode">
	<span class="icon-wrap">
		<span class="icon moon" data-theme-icon-moon aria-hidden="true">
			<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
			</svg>
		</span>
		<span class="icon sun" data-theme-icon-sun aria-hidden="true">
			<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<circle cx="12" cy="12" r="5"/>
				<line x1="12" y1="1" x2="12" y2="3"/>
				<line x1="12" y1="21" x2="12" y2="23"/>
				<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
				<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
				<line x1="1" y1="12" x2="3" y2="12"/>
				<line x1="21" y1="12" x2="23" y2="12"/>
				<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
				<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
			</svg>
		</span>
	</span>
</button>

<script is:inline>
	(() => {
		const key = 'theme';
		const button = document.querySelector('[data-theme-toggle]');
		const moonIcon = document.querySelector('[data-theme-icon-moon]');
		const sunIcon = document.querySelector('[data-theme-icon-sun]');
		if (!button || !moonIcon || !sunIcon) return;

		const setUi = (theme) => {
			const isDark = theme !== 'light';
			button.setAttribute('aria-label', isDark ? 'Switch to light mode' : 'Switch to dark mode');
			moonIcon.toggleAttribute('hidden', !isDark);
			sunIcon.toggleAttribute('hidden', isDark);
		};

		const current = document.documentElement.dataset.theme || 'dark';
		setUi(current);

		button.addEventListener('click', () => {
			const next = document.documentElement.dataset.theme === 'light' ? 'dark' : 'light';
			document.documentElement.dataset.theme = next;
			localStorage.setItem(key, next);
			setUi(next);
		});
	})();
</script>

<style>
	.theme-toggle {
		display: inline-grid;
		place-items: center;
		padding: 0.42rem;
		background: color-mix(in oklab, var(--surface) 80%, transparent);
		border: 1px solid var(--line);
		border-radius: var(--radius-sm);
		color: var(--muted);
		cursor: pointer;
		transition: color var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast);
	}

	.theme-toggle:hover,
	.theme-toggle:focus-visible {
		color: var(--accent-strong);
		border-color: color-mix(in oklab, var(--accent) 40%, var(--line));
		transform: translateY(-1px);
	}

	.icon-wrap {
		display: inline-grid;
		place-items: center;
		width: 18px;
		height: 18px;
	}

	.icon {
		display: inline-flex;
		line-height: 1;
		grid-area: 1 / 1;
	}

	.icon[hidden] {
		display: none;
	}
</style>
