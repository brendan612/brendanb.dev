---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/home/Hero.astro';
import FeaturedProjects from '../components/home/FeaturedProjects.astro';
import { site } from '../consts/site';

const featuredProjects = (await getCollection('projects'))
	.filter((entry) => entry.data.featured)
	.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title={`${site.name} | Home`}>
	<Hero />
	<FeaturedProjects projects={featuredProjects} />

	<!-- Contact CTA â€” terminal-style -->
	<section class="container cta-section">
		<div class="cta terminal">
			<div class="terminal-bar">
				<span class="terminal-dot"></span>
				<span class="terminal-dot"></span>
				<span class="terminal-dot"></span>
				<span class="terminal-filename">connect.sh</span>
			</div>
			<div class="terminal-body cta-body">
				<h2 class="cta-heading">
					<span class="prompt">$</span>
					<span class="cta-text">let's build something useful</span>
					<span class="cursor">&#9608;</span>
				</h2>
				<p class="cta-desc">
					I enjoy shipping polished interfaces, design systems, and product-focused
					web apps. If you want to connect, reach out any time.
				</p>
				<a class="cta-link" href="/contact">
					<span class="mono">Contact Me</span>
					<span class="cta-arrow" aria-hidden="true">&#8599;</span>
				</a>
			</div>
		</div>
	</section>
</BaseLayout>

<style>
	.cta-section {
		padding: var(--space-8) 0;
	}

	.cta-body {
		padding: var(--space-8) var(--space-6) !important;
	}

	.cta-heading {
		font-family: var(--font-display);
		font-size: clamp(1.3rem, 1.1rem + 1vw, 2rem);
		font-weight: 600;
		font-style: italic;
		line-height: 1.2;
		margin: 0 0 var(--space-4);
		display: flex;
		flex-wrap: wrap;
		align-items: baseline;
		gap: 0.5rem;
	}

	.cta-heading .prompt {
		font-family: var(--font-mono);
		font-style: normal;
		font-size: 0.7em;
	}

	.cta-text {
		color: var(--ink);
	}

	.cta-desc {
		color: var(--muted);
		max-width: 52ch;
		font-size: 0.95rem;
		line-height: 1.6;
	}

	.cta-link {
		display: inline-flex;
		align-items: center;
		gap: 0.35rem;
		margin-top: var(--space-4);
		padding: 0.55rem 1rem;
		background: var(--accent);
		color: #fff;
		font-size: 0.84rem;
		font-weight: 500;
		border-radius: var(--radius-sm);
		box-shadow: 0 4px 16px rgba(221, 122, 45, 0.25);
		transition: background var(--transition-base), transform var(--transition-fast), box-shadow var(--transition-base);
	}

	.cta-link:hover,
	.cta-link:focus-visible {
		background: var(--accent-strong);
		transform: translateY(-2px);
		box-shadow: 0 6px 24px rgba(221, 122, 45, 0.35);
	}

	.cta-arrow {
		font-size: 1.1em;
		transition: transform var(--transition-fast);
	}

	.cta-link:hover .cta-arrow {
		transform: translate(1px, -1px);
	}
</style>
